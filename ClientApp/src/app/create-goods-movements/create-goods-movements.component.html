<div class="container" style="margin-top: 3%;">
    <button mat-button class="bg-primary"  (click)="goBack()">
        <mat-icon>reply</mat-icon> 
        Retroceder                   
    </button>
    <hr>
    <div class="card mx-auto" style="max-width: 50rem;">  
      <div class="card-header">
        <h1 style="text-align: center;">Crear movimiento de mercancías</h1>
      </div>  
      <div class="card-body ">
        <form #authForm="ngForm" (ngSubmit)="create(authForm)">
          <div *ngIf="authForm.touched">
            <div *ngIf="!authForm.valid" class="alert alert-danger" role="alert">
              Todos los campos son obligatorios
            </div>
            <div *ngIf="authForm.value.idstorageLocationFrom === authForm.value.idstorageLocationTo && authForm.form.controls.idstorageLocationTo.dirty" class="alert alert-danger" role="alert">
              Almacén de origen y destino deben ser diferentes
            </div>
            <div *ngIf="authForm.value.quantity < 1 && authForm.form.controls.quantity.dirty" class="alert alert-danger" role="alert">
              Cantidad no debe ser menor que 1
            </div>
          </div>



          <div class="form-group">
            <label for="idmovementType">Tipo de movimiento</label>
            <select class="form-control" id="idmovementType" name="idmovementType" required ngModel type="number">              
              <option  *ngFor="let item of movementTypes" [value]="item.idmovementType">{{item.description}}</option>
            </select>
          </div>

          <div class="form-group">
            <label for="idproduct">Producto</label>
            <select class="form-control" id="idproduct" name="idproduct" required ngModel type="number">               
              <option  *ngFor="let item of Products" [value]="item.idproduct">{{item.description}}</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="quantity">Cantidad</label>
            <input
              type="number"
              id="quantity"
              class="form-control"
              ngModel
              name="quantity"
              required   
              min="1"           
            />
          </div>

          <div class="form-group">
            <label for="idstorageLocationFrom">Almacén de origen</label>
            <select class="form-control" id="idstorageLocationFrom" name="idstorageLocationFrom" required ngModel >              
              <option type="number" *ngFor="let item of storagelocations" [value]="item.idstorageLocation">{{item.description}}</option>
            </select>
          </div>

          <div class="form-group">
            <label for="idstorageLocationTo">Almacén de destino</label>
            <select class="form-control" id="idstorageLocationTo" name="idstorageLocationTo" required ngModel >              
              <option type="number" *ngFor="let item of storagelocations" [value]="item.idstorageLocation">{{item.description}}</option>
            </select>
          </div>         
        
          <div>
            <button
              class="btn btn-primary"
              type="submit"
              [disabled]="!authForm.valid || authForm.value.idstorageLocationFrom === authForm.value.idstorageLocationTo || authForm.value.quantity < 1"
            >
              Crear
            </button>     
          </div>
        </form>
      </div>   
      
    </div>
  </div>

